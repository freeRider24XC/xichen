{"content":"<ul>\n<li>\n<p>实现效果预览</p>\n<p><img src=\"@source/blog/image.png\" alt=\"alt text\"></p>\n</li>\n<li>\n<p>导包，使用的是 <code v-pre>dart:developer</code>中的 log 方法，以及用到了<code v-pre>package:flutter/foundation.dart</code>中的 <code v-pre>StackFrame</code></p>\n</li>\n</ul>\n<div class=\"language-dart line-numbers-mode\" data-ext=\"dart\" data-title=\"dart\"><button class=\"copy\" title=\"复制代码\" data-copied=\"已复制\"></button><pre class=\"shiki shiki-themes vitesse-light vitesse-dark vp-code\" v-pre=\"\"><code><span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">import</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> 'dart:developer'</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">import</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> 'package:flutter/foundation.dart'</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span></span></code></pre>\n\n<div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0\"><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div><ul>\n<li>创建一个枚举类型，用于表示日志级别，以及 ANSI 转义序列颜色</li>\n</ul>\n<div class=\"language-dart line-numbers-mode\" data-ext=\"dart\" data-title=\"dart\"><button class=\"copy\" title=\"复制代码\" data-copied=\"已复制\"></button><pre class=\"shiki shiki-themes vitesse-light vitesse-dark vp-code\" v-pre=\"\"><code><span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\">/// 日志级别枚举</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">enum</span><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\"> LogLevel</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">  debug</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">,</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">  warning</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">,</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">  error</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">,</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">  info</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">,</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">}</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\">/// ANSI 转义序列颜色</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">const</span><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\"> String</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> reset </span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">=</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> '</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\">\\x</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">1B[0m'</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">const</span><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\"> String</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> blue </span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">=</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> '</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\">\\x</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">1B[34m'</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">const</span><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\"> String</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> orange </span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">=</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> '</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\">\\x</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">1B[33m'</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">const</span><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\"> String</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> red </span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">=</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> '</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\">\\x</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">1B[31m'</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span></span></code></pre>\n\n<div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div><ul>\n<li>根据日志级别返回不同的颜色</li>\n</ul>\n<div class=\"language-dart line-numbers-mode\" data-ext=\"dart\" data-title=\"dart\"><button class=\"copy\" title=\"复制代码\" data-copied=\"已复制\"></button><pre class=\"shiki shiki-themes vitesse-light vitesse-dark vp-code\" v-pre=\"\"><code><span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\">/// 根据日志级别返回不同的颜色</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\">String</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\"> _getLogLevelColor</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">(</span><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\">LogLevel</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> level) {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">  switch</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> (level) {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">    case</span><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\"> LogLevel</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">debug</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">:</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">      return</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> blue</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">    case</span><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\"> LogLevel</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">warning</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">:</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">      return</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> orange</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">    case</span><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\"> LogLevel</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">error</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">:</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">      return</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> red</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">    case</span><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\"> LogLevel</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">info</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">:</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">      return</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> reset</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">  }</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">}</span></span></code></pre>\n\n<div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div><ul>\n<li>格式化堆栈帧信息</li>\n</ul>\n<div class=\"language-dart line-numbers-mode\" data-ext=\"dart\" data-title=\"dart\"><button class=\"copy\" title=\"复制代码\" data-copied=\"已复制\"></button><pre class=\"shiki shiki-themes vitesse-light vitesse-dark vp-code\" v-pre=\"\"><code><span class=\"line\"><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\">String</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\"> _formatStackFrame</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">(</span><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\">StackFrame</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> frame) {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">  return</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> '#</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">${frame.source}</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> ${frame.package}</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">:</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">${frame.packagePath}</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">:</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">${frame.line}</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">:</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">${frame.column}</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">'</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">}</span></span></code></pre>\n\n<div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div><ul>\n<li>日志消息格式化</li>\n</ul>\n<div class=\"language-dart line-numbers-mode\" data-ext=\"dart\" data-title=\"dart\"><button class=\"copy\" title=\"复制代码\" data-copied=\"已复制\"></button><pre class=\"shiki shiki-themes vitesse-light vitesse-dark vp-code\" v-pre=\"\"><code><span class=\"line\"><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\">String</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\"> _formatLogMessage</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">(</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\">    Object</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">?</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> object</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">,</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\">    LogLevel</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> level</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">,</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\">    StackFrame</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> frame</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">,</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">) {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">    final</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> color </span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">=</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\"> _getLogLevelColor</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">(level)</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">    final</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> formattedTime </span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">=</span><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\"> DateTime</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">now</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">()</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">toString</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">()</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">    final</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> formattedType </span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">=</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> object</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">?</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">runtimeType </span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">??</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> 'Unknown'</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">return</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> '''</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">$color</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">[</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">${level.name.</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">toUpperCase</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">()}</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">] </span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">$formattedTime</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> $formattedType</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">${frame.package}</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">:</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">${frame.packagePath}</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">:</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">${frame.line}</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">:</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">${frame.column}</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">:</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">$object</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">'''</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">}</span></span></code></pre>\n\n<div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div><div class=\"language-dart line-numbers-mode\" data-ext=\"dart\" data-title=\"dart\"><button class=\"copy\" title=\"复制代码\" data-copied=\"已复制\"></button><pre class=\"shiki shiki-themes vitesse-light vitesse-dark vp-code\" v-pre=\"\"><code><span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\">/// 日志打印基础方法</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">void</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\"> _logMessage</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">(</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\">Object</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">?</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> object</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">,</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\">LogLevel</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> level</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">,</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\">bool</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> fullStack </span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">=</span><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\"> false</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">,</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">}) {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">if</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> (</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">!</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">kDebugMode) </span><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">return</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">final</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> frames </span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">=</span><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\"> StackFrame</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">fromStackTrace</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">(</span><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\">StackTrace</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">current)</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">final</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> formattedMessage </span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">=</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\"> _formatLogMessage</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">(object</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">,</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> level</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">,</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> frames[</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\">2</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">])</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\">// 打印日志</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">log</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">(formattedMessage</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">,</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> level</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">:</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 0</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">)</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">if</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> (fullStack) {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">final</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> stackFrames </span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">=</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> frames</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">skip</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">(</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\">2</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">)</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">map</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">(_formatStackFrame)</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">toList</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">()</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">final</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> stackTraceStr </span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">=</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> stackFrames</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">join</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">(</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">'</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\">\\n</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">'</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">)</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">log</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">(stackTraceStr</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">,</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> level</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">:</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 0</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">)</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">}</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">}</span></span></code></pre>\n\n<div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div><ul>\n<li>封装日志打印方法</li>\n</ul>\n<div class=\"language-dart line-numbers-mode\" data-ext=\"dart\" data-title=\"dart\"><button class=\"copy\" title=\"复制代码\" data-copied=\"已复制\"></button><pre class=\"shiki shiki-themes vitesse-light vitesse-dark vp-code\" v-pre=\"\"><code><span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\">/// 打印调试级别的日志</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">void</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\"> logDebug</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">(</span><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\">Object</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">?</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> object</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">,</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> {</span><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\">bool</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> fullStack </span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">=</span><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\"> false</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">}) {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">_logMessage</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">(object</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">,</span><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\"> LogLevel</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">debug</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">,</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> fullStack</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">:</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> fullStack)</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">}</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\">/// 打印警告级别的日志</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">void</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\"> logWarning</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">(</span><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\">Object</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">?</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> object</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">,</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> {</span><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\">bool</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> fullStack </span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">=</span><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\"> false</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">}) {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">_logMessage</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">(object</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">,</span><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\"> LogLevel</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">warning</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">,</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> fullStack</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">:</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> fullStack)</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">}</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\">/// 打印错误级别的日志</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">void</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\"> logError</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">(</span><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\">Object</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">?</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> object</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">,</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> {</span><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\">bool</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> fullStack </span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">=</span><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\"> false</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">}) {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">_logMessage</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">(object</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">,</span><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\"> LogLevel</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">error</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">,</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> fullStack</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">:</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> fullStack)</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">}</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\">/// 打印信息级别的日志</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">void</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\"> logInfo</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">(</span><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\">Object</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">?</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> object</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">,</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> {</span><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\">bool</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> fullStack </span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">=</span><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\"> false</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">}) {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">_logMessage</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">(object</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">,</span><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\"> LogLevel</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">info</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">,</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> fullStack</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">:</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> fullStack)</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">}</span></span></code></pre>\n\n<div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div><ul>\n<li>源码</li>\n</ul>\n<div class=\"language-dart line-numbers-mode\" data-ext=\"dart\" data-title=\"dart\"><button class=\"copy\" title=\"复制代码\" data-copied=\"已复制\"></button><pre class=\"shiki shiki-themes vitesse-light vitesse-dark vp-code\" v-pre=\"\"><code><span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">import</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> 'dart:developer'</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">import</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> 'package:flutter/foundation.dart'</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\">/// 日志级别枚举</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">enum</span><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\"> LogLevel</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">  debug</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">,</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">  warning</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">,</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">  error</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">,</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">  info</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">,</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">}</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\">/// ANSI 转义序列颜色</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">const</span><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\"> String</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> reset </span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">=</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> '</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\">\\x</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">1B[0m'</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">const</span><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\"> String</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> blue </span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">=</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> '</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\">\\x</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">1B[34m'</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">const</span><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\"> String</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> orange </span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">=</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> '</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\">\\x</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">1B[33m'</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">const</span><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\"> String</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> red </span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">=</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> '</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\">\\x</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">1B[31m'</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\">/// 根据日志级别返回不同的颜色</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\">String</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\"> _getLogLevelColor</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">(</span><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\">LogLevel</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> level) {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">  switch</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> (level) {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">    case</span><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\"> LogLevel</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">debug</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">:</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">      return</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> blue</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">    case</span><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\"> LogLevel</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">warning</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">:</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">      return</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> orange</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">    case</span><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\"> LogLevel</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">error</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">:</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">      return</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> red</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">    case</span><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\"> LogLevel</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">info</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">:</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">      return</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> reset</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">  }</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">}</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\">/// 格式化堆栈帧信息</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\">String</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\"> _formatStackFrame</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">(</span><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\">StackFrame</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> frame) {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">  return</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> '#</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">${frame.source}</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> ${frame.package}</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">:</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">${frame.packagePath}</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">:</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">${frame.line}</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">:</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">${frame.column}</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">'</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">}</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\">/// 日志消息格式化</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\">String</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\"> _formatLogMessage</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">(</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\">  Object</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">?</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> object</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">,</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\">  LogLevel</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> level</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">,</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\">  StackFrame</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> frame</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">,</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">) {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">  final</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> color </span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">=</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\"> _getLogLevelColor</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">(level)</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">  final</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> formattedTime </span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">=</span><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\"> DateTime</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">now</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">()</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">toString</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">()</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">  final</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> formattedType </span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">=</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> object</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">?</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">runtimeType </span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">??</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> 'Unknown'</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">  return</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> '''</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">$color</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">[</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">${level.name.</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">toUpperCase</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">()}</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">] </span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">$formattedTime</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> $formattedType</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">${frame.package}</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">:</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">${frame.packagePath}</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">:</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">${frame.line}</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">:</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">${frame.column}</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">:</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">$object</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">'''</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">}</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\">/// 日志打印基础方法</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">void</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\"> _logMessage</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">(</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\">  Object</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">?</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> object</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">,</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\">  LogLevel</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> level</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">,</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\">  bool</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> fullStack </span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">=</span><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\"> false</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">,</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">}) {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">  if</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> (</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">!</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">kDebugMode) </span><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">return</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">  final</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> frames </span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">=</span><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\"> StackFrame</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">fromStackTrace</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">(</span><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\">StackTrace</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">current)</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">  final</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> formattedMessage </span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">=</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\"> _formatLogMessage</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">(object</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">,</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> level</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">,</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> frames[</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\">2</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">])</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\">  // 打印日志</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">  log</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">(formattedMessage</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">,</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> level</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">:</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 0</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">)</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">  if</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> (fullStack) {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">    final</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> stackFrames </span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">=</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> frames</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">skip</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">(</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\">2</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">)</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">map</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">(_formatStackFrame)</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">toList</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">()</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">    final</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> stackTraceStr </span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">=</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> stackFrames</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">join</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">(</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">'</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\">\\n</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">'</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">)</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">    log</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">(stackTraceStr</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">,</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> level</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">:</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 0</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">)</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">  }</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">}</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\">/// 打印调试级别的日志</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">void</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\"> logDebug</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">(</span><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\">Object</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">?</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> object</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">,</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> {</span><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\">bool</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> fullStack </span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">=</span><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\"> false</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">}) {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">  _logMessage</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">(object</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">,</span><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\"> LogLevel</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">debug</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">,</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> fullStack</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">:</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> fullStack)</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">}</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\">/// 打印警告级别的日志</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">void</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\"> logWarning</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">(</span><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\">Object</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">?</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> object</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">,</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> {</span><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\">bool</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> fullStack </span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">=</span><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\"> false</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">}) {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">  _logMessage</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">(object</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">,</span><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\"> LogLevel</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">warning</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">,</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> fullStack</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">:</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> fullStack)</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">}</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\">/// 打印错误级别的日志</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">void</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\"> logError</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">(</span><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\">Object</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">?</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> object</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">,</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> {</span><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\">bool</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> fullStack </span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">=</span><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\"> false</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">}) {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">  _logMessage</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">(object</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">,</span><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\"> LogLevel</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">error</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">,</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> fullStack</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">:</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> fullStack)</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">}</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\">/// 打印信息级别的日志</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">void</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\"> logInfo</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">(</span><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\">Object</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">?</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> object</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">,</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> {</span><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\">bool</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> fullStack </span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">=</span><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\"> false</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">}) {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">  _logMessage</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">(object</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">,</span><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\"> LogLevel</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">info</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">,</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> fullStack</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">:</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> fullStack)</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">}</span></span></code></pre>\n\n<div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div>","env":{"base":"/xichen/","filePath":"E:/xichen/xichen_knight/docs/blog/logDebug.md","filePathRelative":"blog/logDebug.md","frontmatter":{"title":"日志打印工具","author":null,"createTime":"2024/08/14 10:31:11","permalink":"/article/vz8ct24a/"},"sfcBlocks":{"template":{"type":"template","content":"<template><ul>\n<li>\n<p>实现效果预览</p>\n<p><img src=\"@source/blog/image.png\" alt=\"alt text\"></p>\n</li>\n<li>\n<p>导包，使用的是 <code v-pre>dart:developer</code>中的 log 方法，以及用到了<code v-pre>package:flutter/foundation.dart</code>中的 <code v-pre>StackFrame</code></p>\n</li>\n</ul>\n<div class=\"language-dart line-numbers-mode\" data-ext=\"dart\" data-title=\"dart\"><button class=\"copy\" title=\"复制代码\" data-copied=\"已复制\"></button><pre class=\"shiki shiki-themes vitesse-light vitesse-dark vp-code\" v-pre=\"\"><code><span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">import</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> 'dart:developer'</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">import</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> 'package:flutter/foundation.dart'</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span></span></code></pre>\n\n<div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0\"><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div><ul>\n<li>创建一个枚举类型，用于表示日志级别，以及 ANSI 转义序列颜色</li>\n</ul>\n<div class=\"language-dart line-numbers-mode\" data-ext=\"dart\" data-title=\"dart\"><button class=\"copy\" title=\"复制代码\" data-copied=\"已复制\"></button><pre class=\"shiki shiki-themes vitesse-light vitesse-dark vp-code\" v-pre=\"\"><code><span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\">/// 日志级别枚举</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">enum</span><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\"> LogLevel</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">  debug</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">,</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">  warning</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">,</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">  error</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">,</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">  info</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">,</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">}</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\">/// ANSI 转义序列颜色</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">const</span><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\"> String</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> reset </span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">=</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> '</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\">\\x</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">1B[0m'</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">const</span><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\"> String</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> blue </span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">=</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> '</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\">\\x</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">1B[34m'</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">const</span><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\"> String</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> orange </span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">=</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> '</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\">\\x</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">1B[33m'</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">const</span><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\"> String</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> red </span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">=</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> '</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\">\\x</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">1B[31m'</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span></span></code></pre>\n\n<div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div><ul>\n<li>根据日志级别返回不同的颜色</li>\n</ul>\n<div class=\"language-dart line-numbers-mode\" data-ext=\"dart\" data-title=\"dart\"><button class=\"copy\" title=\"复制代码\" data-copied=\"已复制\"></button><pre class=\"shiki shiki-themes vitesse-light vitesse-dark vp-code\" v-pre=\"\"><code><span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\">/// 根据日志级别返回不同的颜色</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\">String</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\"> _getLogLevelColor</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">(</span><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\">LogLevel</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> level) {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">  switch</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> (level) {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">    case</span><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\"> LogLevel</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">debug</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">:</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">      return</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> blue</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">    case</span><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\"> LogLevel</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">warning</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">:</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">      return</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> orange</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">    case</span><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\"> LogLevel</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">error</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">:</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">      return</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> red</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">    case</span><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\"> LogLevel</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">info</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">:</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">      return</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> reset</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">  }</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">}</span></span></code></pre>\n\n<div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div><ul>\n<li>格式化堆栈帧信息</li>\n</ul>\n<div class=\"language-dart line-numbers-mode\" data-ext=\"dart\" data-title=\"dart\"><button class=\"copy\" title=\"复制代码\" data-copied=\"已复制\"></button><pre class=\"shiki shiki-themes vitesse-light vitesse-dark vp-code\" v-pre=\"\"><code><span class=\"line\"><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\">String</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\"> _formatStackFrame</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">(</span><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\">StackFrame</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> frame) {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">  return</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> '#</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">${frame.source}</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> ${frame.package}</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">:</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">${frame.packagePath}</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">:</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">${frame.line}</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">:</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">${frame.column}</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">'</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">}</span></span></code></pre>\n\n<div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div><ul>\n<li>日志消息格式化</li>\n</ul>\n<div class=\"language-dart line-numbers-mode\" data-ext=\"dart\" data-title=\"dart\"><button class=\"copy\" title=\"复制代码\" data-copied=\"已复制\"></button><pre class=\"shiki shiki-themes vitesse-light vitesse-dark vp-code\" v-pre=\"\"><code><span class=\"line\"><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\">String</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\"> _formatLogMessage</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">(</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\">    Object</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">?</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> object</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">,</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\">    LogLevel</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> level</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">,</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\">    StackFrame</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> frame</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">,</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">) {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">    final</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> color </span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">=</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\"> _getLogLevelColor</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">(level)</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">    final</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> formattedTime </span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">=</span><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\"> DateTime</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">now</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">()</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">toString</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">()</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">    final</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> formattedType </span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">=</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> object</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">?</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">runtimeType </span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">??</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> 'Unknown'</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">return</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> '''</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">$color</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">[</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">${level.name.</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">toUpperCase</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">()}</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">] </span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">$formattedTime</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> $formattedType</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">${frame.package}</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">:</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">${frame.packagePath}</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">:</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">${frame.line}</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">:</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">${frame.column}</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">:</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">$object</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">'''</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">}</span></span></code></pre>\n\n<div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div><div class=\"language-dart line-numbers-mode\" data-ext=\"dart\" data-title=\"dart\"><button class=\"copy\" title=\"复制代码\" data-copied=\"已复制\"></button><pre class=\"shiki shiki-themes vitesse-light vitesse-dark vp-code\" v-pre=\"\"><code><span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\">/// 日志打印基础方法</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">void</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\"> _logMessage</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">(</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\">Object</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">?</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> object</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">,</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\">LogLevel</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> level</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">,</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\">bool</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> fullStack </span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">=</span><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\"> false</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">,</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">}) {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">if</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> (</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">!</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">kDebugMode) </span><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">return</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">final</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> frames </span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">=</span><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\"> StackFrame</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">fromStackTrace</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">(</span><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\">StackTrace</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">current)</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">final</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> formattedMessage </span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">=</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\"> _formatLogMessage</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">(object</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">,</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> level</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">,</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> frames[</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\">2</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">])</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\">// 打印日志</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">log</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">(formattedMessage</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">,</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> level</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">:</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 0</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">)</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">if</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> (fullStack) {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">final</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> stackFrames </span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">=</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> frames</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">skip</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">(</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\">2</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">)</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">map</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">(_formatStackFrame)</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">toList</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">()</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">final</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> stackTraceStr </span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">=</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> stackFrames</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">join</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">(</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">'</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\">\\n</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">'</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">)</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">log</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">(stackTraceStr</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">,</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> level</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">:</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 0</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">)</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">}</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">}</span></span></code></pre>\n\n<div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div><ul>\n<li>封装日志打印方法</li>\n</ul>\n<div class=\"language-dart line-numbers-mode\" data-ext=\"dart\" data-title=\"dart\"><button class=\"copy\" title=\"复制代码\" data-copied=\"已复制\"></button><pre class=\"shiki shiki-themes vitesse-light vitesse-dark vp-code\" v-pre=\"\"><code><span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\">/// 打印调试级别的日志</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">void</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\"> logDebug</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">(</span><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\">Object</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">?</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> object</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">,</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> {</span><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\">bool</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> fullStack </span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">=</span><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\"> false</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">}) {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">_logMessage</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">(object</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">,</span><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\"> LogLevel</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">debug</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">,</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> fullStack</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">:</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> fullStack)</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">}</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\">/// 打印警告级别的日志</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">void</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\"> logWarning</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">(</span><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\">Object</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">?</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> object</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">,</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> {</span><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\">bool</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> fullStack </span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">=</span><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\"> false</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">}) {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">_logMessage</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">(object</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">,</span><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\"> LogLevel</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">warning</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">,</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> fullStack</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">:</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> fullStack)</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">}</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\">/// 打印错误级别的日志</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">void</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\"> logError</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">(</span><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\">Object</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">?</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> object</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">,</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> {</span><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\">bool</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> fullStack </span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">=</span><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\"> false</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">}) {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">_logMessage</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">(object</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">,</span><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\"> LogLevel</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">error</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">,</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> fullStack</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">:</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> fullStack)</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">}</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\">/// 打印信息级别的日志</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">void</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\"> logInfo</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">(</span><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\">Object</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">?</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> object</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">,</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> {</span><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\">bool</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> fullStack </span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">=</span><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\"> false</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">}) {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">_logMessage</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">(object</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">,</span><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\"> LogLevel</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">info</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">,</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> fullStack</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">:</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> fullStack)</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">}</span></span></code></pre>\n\n<div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div><ul>\n<li>源码</li>\n</ul>\n<div class=\"language-dart line-numbers-mode\" data-ext=\"dart\" data-title=\"dart\"><button class=\"copy\" title=\"复制代码\" data-copied=\"已复制\"></button><pre class=\"shiki shiki-themes vitesse-light vitesse-dark vp-code\" v-pre=\"\"><code><span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">import</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> 'dart:developer'</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">import</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> 'package:flutter/foundation.dart'</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\">/// 日志级别枚举</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">enum</span><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\"> LogLevel</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">  debug</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">,</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">  warning</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">,</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">  error</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">,</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">  info</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">,</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">}</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\">/// ANSI 转义序列颜色</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">const</span><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\"> String</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> reset </span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">=</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> '</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\">\\x</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">1B[0m'</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">const</span><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\"> String</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> blue </span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">=</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> '</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\">\\x</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">1B[34m'</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">const</span><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\"> String</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> orange </span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">=</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> '</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\">\\x</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">1B[33m'</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">const</span><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\"> String</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> red </span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">=</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> '</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\">\\x</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">1B[31m'</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\">/// 根据日志级别返回不同的颜色</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\">String</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\"> _getLogLevelColor</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">(</span><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\">LogLevel</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> level) {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">  switch</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> (level) {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">    case</span><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\"> LogLevel</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">debug</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">:</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">      return</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> blue</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">    case</span><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\"> LogLevel</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">warning</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">:</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">      return</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> orange</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">    case</span><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\"> LogLevel</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">error</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">:</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">      return</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> red</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">    case</span><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\"> LogLevel</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">info</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">:</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">      return</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> reset</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">  }</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">}</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\">/// 格式化堆栈帧信息</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\">String</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\"> _formatStackFrame</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">(</span><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\">StackFrame</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> frame) {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">  return</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> '#</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">${frame.source}</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> ${frame.package}</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">:</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">${frame.packagePath}</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">:</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">${frame.line}</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">:</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">${frame.column}</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">'</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">}</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\">/// 日志消息格式化</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\">String</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\"> _formatLogMessage</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">(</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\">  Object</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">?</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> object</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">,</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\">  LogLevel</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> level</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">,</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\">  StackFrame</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> frame</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">,</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">) {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">  final</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> color </span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">=</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\"> _getLogLevelColor</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">(level)</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">  final</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> formattedTime </span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">=</span><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\"> DateTime</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">now</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">()</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">toString</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">()</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">  final</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> formattedType </span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">=</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> object</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">?</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">runtimeType </span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">??</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> 'Unknown'</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">  return</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> '''</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">$color</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">[</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">${level.name.</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">toUpperCase</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">()}</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">] </span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">$formattedTime</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> $formattedType</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">${frame.package}</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">:</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">${frame.packagePath}</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">:</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">${frame.line}</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">:</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">${frame.column}</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">:</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">$object</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">'''</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">}</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\">/// 日志打印基础方法</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">void</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\"> _logMessage</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">(</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\">  Object</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">?</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> object</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">,</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\">  LogLevel</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> level</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">,</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\">  bool</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> fullStack </span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">=</span><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\"> false</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">,</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">}) {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">  if</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> (</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">!</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">kDebugMode) </span><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">return</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">  final</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> frames </span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">=</span><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\"> StackFrame</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">fromStackTrace</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">(</span><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\">StackTrace</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">current)</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">  final</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> formattedMessage </span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">=</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\"> _formatLogMessage</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">(object</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">,</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> level</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">,</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> frames[</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\">2</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">])</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\">  // 打印日志</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">  log</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">(formattedMessage</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">,</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> level</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">:</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 0</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">)</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">  if</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> (fullStack) {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">    final</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> stackFrames </span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">=</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> frames</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">skip</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">(</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\">2</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">)</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">map</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">(_formatStackFrame)</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">toList</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">()</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">    final</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> stackTraceStr </span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">=</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> stackFrames</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">join</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">(</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">'</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\">\\n</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">'</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">)</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">    log</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">(stackTraceStr</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">,</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> level</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">:</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 0</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">)</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">  }</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">}</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\">/// 打印调试级别的日志</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">void</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\"> logDebug</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">(</span><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\">Object</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">?</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> object</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">,</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> {</span><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\">bool</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> fullStack </span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">=</span><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\"> false</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">}) {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">  _logMessage</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">(object</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">,</span><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\"> LogLevel</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">debug</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">,</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> fullStack</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">:</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> fullStack)</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">}</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\">/// 打印警告级别的日志</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">void</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\"> logWarning</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">(</span><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\">Object</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">?</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> object</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">,</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> {</span><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\">bool</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> fullStack </span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">=</span><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\"> false</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">}) {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">  _logMessage</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">(object</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">,</span><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\"> LogLevel</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">warning</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">,</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> fullStack</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">:</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> fullStack)</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">}</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\">/// 打印错误级别的日志</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">void</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\"> logError</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">(</span><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\">Object</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">?</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> object</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">,</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> {</span><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\">bool</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> fullStack </span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">=</span><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\"> false</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">}) {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">  _logMessage</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">(object</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">,</span><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\"> LogLevel</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">error</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">,</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> fullStack</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">:</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> fullStack)</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">}</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\">/// 打印信息级别的日志</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">void</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\"> logInfo</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">(</span><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\">Object</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">?</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> object</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">,</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> {</span><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\">bool</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> fullStack </span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">=</span><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\"> false</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">}) {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">  _logMessage</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">(object</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">,</span><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\"> LogLevel</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">info</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">,</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> fullStack</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">:</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> fullStack)</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">}</span></span></code></pre>\n\n<div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div></template>","contentStripped":"<ul>\n<li>\n<p>实现效果预览</p>\n<p><img src=\"@source/blog/image.png\" alt=\"alt text\"></p>\n</li>\n<li>\n<p>导包，使用的是 <code v-pre>dart:developer</code>中的 log 方法，以及用到了<code v-pre>package:flutter/foundation.dart</code>中的 <code v-pre>StackFrame</code></p>\n</li>\n</ul>\n<div class=\"language-dart line-numbers-mode\" data-ext=\"dart\" data-title=\"dart\"><button class=\"copy\" title=\"复制代码\" data-copied=\"已复制\"></button><pre class=\"shiki shiki-themes vitesse-light vitesse-dark vp-code\" v-pre=\"\"><code><span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">import</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> 'dart:developer'</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">import</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> 'package:flutter/foundation.dart'</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span></span></code></pre>\n\n<div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0\"><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div><ul>\n<li>创建一个枚举类型，用于表示日志级别，以及 ANSI 转义序列颜色</li>\n</ul>\n<div class=\"language-dart line-numbers-mode\" data-ext=\"dart\" data-title=\"dart\"><button class=\"copy\" title=\"复制代码\" data-copied=\"已复制\"></button><pre class=\"shiki shiki-themes vitesse-light vitesse-dark vp-code\" v-pre=\"\"><code><span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\">/// 日志级别枚举</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">enum</span><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\"> LogLevel</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">  debug</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">,</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">  warning</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">,</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">  error</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">,</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">  info</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">,</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">}</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\">/// ANSI 转义序列颜色</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">const</span><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\"> String</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> reset </span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">=</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> '</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\">\\x</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">1B[0m'</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">const</span><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\"> String</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> blue </span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">=</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> '</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\">\\x</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">1B[34m'</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">const</span><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\"> String</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> orange </span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">=</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> '</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\">\\x</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">1B[33m'</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">const</span><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\"> String</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> red </span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">=</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> '</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\">\\x</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">1B[31m'</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span></span></code></pre>\n\n<div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div><ul>\n<li>根据日志级别返回不同的颜色</li>\n</ul>\n<div class=\"language-dart line-numbers-mode\" data-ext=\"dart\" data-title=\"dart\"><button class=\"copy\" title=\"复制代码\" data-copied=\"已复制\"></button><pre class=\"shiki shiki-themes vitesse-light vitesse-dark vp-code\" v-pre=\"\"><code><span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\">/// 根据日志级别返回不同的颜色</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\">String</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\"> _getLogLevelColor</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">(</span><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\">LogLevel</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> level) {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">  switch</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> (level) {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">    case</span><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\"> LogLevel</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">debug</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">:</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">      return</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> blue</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">    case</span><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\"> LogLevel</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">warning</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">:</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">      return</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> orange</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">    case</span><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\"> LogLevel</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">error</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">:</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">      return</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> red</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">    case</span><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\"> LogLevel</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">info</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">:</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">      return</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> reset</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">  }</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">}</span></span></code></pre>\n\n<div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div><ul>\n<li>格式化堆栈帧信息</li>\n</ul>\n<div class=\"language-dart line-numbers-mode\" data-ext=\"dart\" data-title=\"dart\"><button class=\"copy\" title=\"复制代码\" data-copied=\"已复制\"></button><pre class=\"shiki shiki-themes vitesse-light vitesse-dark vp-code\" v-pre=\"\"><code><span class=\"line\"><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\">String</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\"> _formatStackFrame</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">(</span><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\">StackFrame</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> frame) {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">  return</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> '#</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">${frame.source}</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> ${frame.package}</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">:</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">${frame.packagePath}</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">:</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">${frame.line}</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">:</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">${frame.column}</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">'</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">}</span></span></code></pre>\n\n<div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div><ul>\n<li>日志消息格式化</li>\n</ul>\n<div class=\"language-dart line-numbers-mode\" data-ext=\"dart\" data-title=\"dart\"><button class=\"copy\" title=\"复制代码\" data-copied=\"已复制\"></button><pre class=\"shiki shiki-themes vitesse-light vitesse-dark vp-code\" v-pre=\"\"><code><span class=\"line\"><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\">String</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\"> _formatLogMessage</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">(</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\">    Object</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">?</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> object</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">,</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\">    LogLevel</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> level</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">,</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\">    StackFrame</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> frame</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">,</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">) {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">    final</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> color </span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">=</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\"> _getLogLevelColor</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">(level)</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">    final</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> formattedTime </span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">=</span><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\"> DateTime</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">now</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">()</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">toString</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">()</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">    final</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> formattedType </span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">=</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> object</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">?</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">runtimeType </span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">??</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> 'Unknown'</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">return</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> '''</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">$color</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">[</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">${level.name.</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">toUpperCase</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">()}</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">] </span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">$formattedTime</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> $formattedType</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">${frame.package}</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">:</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">${frame.packagePath}</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">:</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">${frame.line}</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">:</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">${frame.column}</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">:</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">$object</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">'''</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">}</span></span></code></pre>\n\n<div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div><div class=\"language-dart line-numbers-mode\" data-ext=\"dart\" data-title=\"dart\"><button class=\"copy\" title=\"复制代码\" data-copied=\"已复制\"></button><pre class=\"shiki shiki-themes vitesse-light vitesse-dark vp-code\" v-pre=\"\"><code><span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\">/// 日志打印基础方法</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">void</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\"> _logMessage</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">(</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\">Object</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">?</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> object</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">,</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\">LogLevel</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> level</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">,</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\">bool</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> fullStack </span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">=</span><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\"> false</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">,</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">}) {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">if</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> (</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">!</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">kDebugMode) </span><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">return</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">final</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> frames </span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">=</span><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\"> StackFrame</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">fromStackTrace</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">(</span><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\">StackTrace</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">current)</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">final</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> formattedMessage </span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">=</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\"> _formatLogMessage</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">(object</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">,</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> level</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">,</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> frames[</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\">2</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">])</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\">// 打印日志</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">log</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">(formattedMessage</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">,</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> level</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">:</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 0</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">)</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">if</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> (fullStack) {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">final</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> stackFrames </span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">=</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> frames</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">skip</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">(</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\">2</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">)</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">map</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">(_formatStackFrame)</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">toList</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">()</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">final</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> stackTraceStr </span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">=</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> stackFrames</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">join</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">(</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">'</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\">\\n</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">'</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">)</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">log</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">(stackTraceStr</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">,</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> level</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">:</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 0</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">)</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">}</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">}</span></span></code></pre>\n\n<div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div><ul>\n<li>封装日志打印方法</li>\n</ul>\n<div class=\"language-dart line-numbers-mode\" data-ext=\"dart\" data-title=\"dart\"><button class=\"copy\" title=\"复制代码\" data-copied=\"已复制\"></button><pre class=\"shiki shiki-themes vitesse-light vitesse-dark vp-code\" v-pre=\"\"><code><span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\">/// 打印调试级别的日志</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">void</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\"> logDebug</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">(</span><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\">Object</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">?</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> object</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">,</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> {</span><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\">bool</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> fullStack </span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">=</span><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\"> false</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">}) {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">_logMessage</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">(object</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">,</span><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\"> LogLevel</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">debug</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">,</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> fullStack</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">:</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> fullStack)</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">}</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\">/// 打印警告级别的日志</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">void</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\"> logWarning</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">(</span><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\">Object</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">?</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> object</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">,</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> {</span><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\">bool</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> fullStack </span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">=</span><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\"> false</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">}) {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">_logMessage</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">(object</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">,</span><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\"> LogLevel</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">warning</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">,</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> fullStack</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">:</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> fullStack)</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">}</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\">/// 打印错误级别的日志</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">void</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\"> logError</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">(</span><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\">Object</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">?</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> object</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">,</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> {</span><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\">bool</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> fullStack </span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">=</span><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\"> false</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">}) {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">_logMessage</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">(object</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">,</span><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\"> LogLevel</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">error</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">,</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> fullStack</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">:</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> fullStack)</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">}</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\">/// 打印信息级别的日志</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">void</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\"> logInfo</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">(</span><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\">Object</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">?</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> object</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">,</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> {</span><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\">bool</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> fullStack </span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">=</span><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\"> false</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">}) {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">_logMessage</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">(object</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">,</span><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\"> LogLevel</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">info</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">,</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> fullStack</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">:</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> fullStack)</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">}</span></span></code></pre>\n\n<div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div><ul>\n<li>源码</li>\n</ul>\n<div class=\"language-dart line-numbers-mode\" data-ext=\"dart\" data-title=\"dart\"><button class=\"copy\" title=\"复制代码\" data-copied=\"已复制\"></button><pre class=\"shiki shiki-themes vitesse-light vitesse-dark vp-code\" v-pre=\"\"><code><span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">import</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> 'dart:developer'</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">import</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> 'package:flutter/foundation.dart'</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\">/// 日志级别枚举</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">enum</span><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\"> LogLevel</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">  debug</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">,</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">  warning</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">,</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">  error</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">,</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">  info</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">,</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">}</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\">/// ANSI 转义序列颜色</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">const</span><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\"> String</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> reset </span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">=</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> '</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\">\\x</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">1B[0m'</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">const</span><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\"> String</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> blue </span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">=</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> '</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\">\\x</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">1B[34m'</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">const</span><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\"> String</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> orange </span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">=</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> '</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\">\\x</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">1B[33m'</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">const</span><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\"> String</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> red </span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">=</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> '</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\">\\x</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">1B[31m'</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\">/// 根据日志级别返回不同的颜色</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\">String</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\"> _getLogLevelColor</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">(</span><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\">LogLevel</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> level) {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">  switch</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> (level) {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">    case</span><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\"> LogLevel</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">debug</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">:</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">      return</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> blue</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">    case</span><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\"> LogLevel</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">warning</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">:</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">      return</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> orange</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">    case</span><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\"> LogLevel</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">error</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">:</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">      return</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> red</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">    case</span><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\"> LogLevel</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">info</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">:</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">      return</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> reset</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">  }</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">}</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\">/// 格式化堆栈帧信息</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\">String</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\"> _formatStackFrame</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">(</span><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\">StackFrame</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> frame) {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">  return</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> '#</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">${frame.source}</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> ${frame.package}</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">:</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">${frame.packagePath}</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">:</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">${frame.line}</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">:</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">${frame.column}</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">'</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">}</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\">/// 日志消息格式化</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\">String</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\"> _formatLogMessage</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">(</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\">  Object</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">?</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> object</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">,</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\">  LogLevel</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> level</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">,</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\">  StackFrame</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> frame</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">,</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">) {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">  final</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> color </span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">=</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\"> _getLogLevelColor</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">(level)</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">  final</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> formattedTime </span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">=</span><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\"> DateTime</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">now</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">()</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">toString</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">()</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">  final</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> formattedType </span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">=</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> object</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">?</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">runtimeType </span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">??</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> 'Unknown'</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">  return</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> '''</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">$color</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">[</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">${level.name.</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">toUpperCase</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">()}</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">] </span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">$formattedTime</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\"> $formattedType</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">${frame.package}</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">:</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">${frame.packagePath}</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">:</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">${frame.line}</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">:</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">${frame.column}</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">:</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">$object</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">'''</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">}</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\">/// 日志打印基础方法</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">void</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\"> _logMessage</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">(</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\">  Object</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">?</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> object</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">,</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\">  LogLevel</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> level</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">,</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\">  bool</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> fullStack </span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">=</span><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\"> false</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">,</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">}) {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">  if</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> (</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">!</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">kDebugMode) </span><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">return</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">  final</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> frames </span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">=</span><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\"> StackFrame</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">fromStackTrace</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">(</span><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\">StackTrace</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">current)</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">  final</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> formattedMessage </span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">=</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\"> _formatLogMessage</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">(object</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">,</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> level</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">,</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> frames[</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\">2</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">])</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\">  // 打印日志</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">  log</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">(formattedMessage</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">,</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> level</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">:</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 0</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">)</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\">  if</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> (fullStack) {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">    final</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> stackFrames </span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">=</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> frames</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">skip</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">(</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\">2</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">)</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">map</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">(_formatStackFrame)</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">toList</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">()</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">    final</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> stackTraceStr </span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">=</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> stackFrames</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">join</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">(</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">'</span><span style=\"--shiki-light:#A65E2B;--shiki-dark:#C99076\">\\n</span><span style=\"--shiki-light:#B56959;--shiki-dark:#C98A7D\">'</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">)</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">    log</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">(stackTraceStr</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">,</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> level</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">:</span><span style=\"--shiki-light:#2F798A;--shiki-dark:#4C9A91\"> 0</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">)</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">  }</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">}</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\">/// 打印调试级别的日志</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">void</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\"> logDebug</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">(</span><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\">Object</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">?</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> object</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">,</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> {</span><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\">bool</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> fullStack </span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">=</span><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\"> false</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">}) {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">  _logMessage</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">(object</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">,</span><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\"> LogLevel</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">debug</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">,</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> fullStack</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">:</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> fullStack)</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">}</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\">/// 打印警告级别的日志</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">void</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\"> logWarning</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">(</span><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\">Object</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">?</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> object</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">,</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> {</span><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\">bool</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> fullStack </span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">=</span><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\"> false</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">}) {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">  _logMessage</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">(object</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">,</span><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\"> LogLevel</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">warning</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">,</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> fullStack</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">:</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> fullStack)</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">}</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\">/// 打印错误级别的日志</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">void</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\"> logError</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">(</span><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\">Object</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">?</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> object</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">,</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> {</span><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\">bool</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> fullStack </span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">=</span><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\"> false</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">}) {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">  _logMessage</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">(object</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">,</span><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\"> LogLevel</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">error</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">,</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> fullStack</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">:</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> fullStack)</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">}</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"--shiki-light:#A0ADA0;--shiki-dark:#758575DD\">/// 打印信息级别的日志</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">void</span><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\"> logInfo</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">(</span><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\">Object</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">?</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> object</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">,</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> {</span><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\">bool</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> fullStack </span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">=</span><span style=\"--shiki-light:#1E754F;--shiki-dark:#4D9375\"> false</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">}) {</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#59873A;--shiki-dark:#80A665\">  _logMessage</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">(object</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">,</span><span style=\"--shiki-light:#998418;--shiki-dark:#B8A965\"> LogLevel</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">.</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">info</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">,</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> fullStack</span><span style=\"--shiki-light:#AB5959;--shiki-dark:#CB7676\">:</span><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\"> fullStack)</span><span style=\"--shiki-light:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"--shiki-light:#393A34;--shiki-dark:#DBD7CAEE\">}</span></span></code></pre>\n\n<div class=\"line-numbers\" aria-hidden=\"true\" style=\"counter-reset:line-number 0\"><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div><div class=\"line-number\"></div></div></div>","tagOpen":"<template>","tagClose":"</template>"},"script":null,"scriptSetup":null,"scripts":[],"styles":[],"customBlocks":[]},"content":"\n- 实现效果预览\n\n  ![alt text](image.png)\n\n- 导包，使用的是 `dart:developer`中的 log 方法，以及用到了`package:flutter/foundation.dart`中的 `StackFrame`\n\n```dart\nimport 'dart:developer';\nimport 'package:flutter/foundation.dart';\n```\n\n- 创建一个枚举类型，用于表示日志级别，以及 ANSI 转义序列颜色\n\n```dart\n/// 日志级别枚举\nenum LogLevel {\n  debug,\n  warning,\n  error,\n  info,\n}\n/// ANSI 转义序列颜色\nconst String reset = '\\x1B[0m';\nconst String blue = '\\x1B[34m';\nconst String orange = '\\x1B[33m';\nconst String red = '\\x1B[31m';\n```\n\n- 根据日志级别返回不同的颜色\n\n```dart\n/// 根据日志级别返回不同的颜色\nString _getLogLevelColor(LogLevel level) {\n  switch (level) {\n    case LogLevel.debug:\n      return blue;\n    case LogLevel.warning:\n      return orange;\n    case LogLevel.error:\n      return red;\n    case LogLevel.info:\n      return reset;\n  }\n}\n```\n\n- 格式化堆栈帧信息\n\n```dart\nString _formatStackFrame(StackFrame frame) {\n  return '#${frame.source} ${frame.package}:${frame.packagePath}:${frame.line}:${frame.column}';\n}\n```\n\n- 日志消息格式化\n\n```dart\nString _formatLogMessage(\n    Object? object,\n    LogLevel level,\n    StackFrame frame,\n) {\n    final color = _getLogLevelColor(level);\n    final formattedTime = DateTime.now().toString();\n    final formattedType = object?.runtimeType ?? 'Unknown';\n\nreturn '''\n$color[${level.name.toUpperCase()}] $formattedTime $formattedType\n${frame.package}:${frame.packagePath}:${frame.line}:${frame.column}:\n$object\n''';\n}\n```\n\n```dart\n/// 日志打印基础方法\nvoid _logMessage(\nObject? object,\nLogLevel level, {\nbool fullStack = false,\n}) {\nif (!kDebugMode) return;\n\nfinal frames = StackFrame.fromStackTrace(StackTrace.current);\nfinal formattedMessage = _formatLogMessage(object, level, frames[2]);\n\n// 打印日志\nlog(formattedMessage, level: 0);\n\nif (fullStack) {\nfinal stackFrames = frames.skip(2).map(_formatStackFrame).toList();\nfinal stackTraceStr = stackFrames.join('\\n');\nlog(stackTraceStr, level: 0);\n}\n}\n```\n\n- 封装日志打印方法\n\n```dart\n/// 打印调试级别的日志\nvoid logDebug(Object? object, {bool fullStack = false}) {\n_logMessage(object, LogLevel.debug, fullStack: fullStack);\n}\n\n/// 打印警告级别的日志\nvoid logWarning(Object? object, {bool fullStack = false}) {\n_logMessage(object, LogLevel.warning, fullStack: fullStack);\n}\n\n/// 打印错误级别的日志\nvoid logError(Object? object, {bool fullStack = false}) {\n_logMessage(object, LogLevel.error, fullStack: fullStack);\n}\n\n/// 打印信息级别的日志\nvoid logInfo(Object? object, {bool fullStack = false}) {\n_logMessage(object, LogLevel.info, fullStack: fullStack);\n}\n\n```\n\n- 源码\n\n```dart\nimport 'dart:developer';\nimport 'package:flutter/foundation.dart';\n\n/// 日志级别枚举\nenum LogLevel {\n  debug,\n  warning,\n  error,\n  info,\n}\n\n/// ANSI 转义序列颜色\nconst String reset = '\\x1B[0m';\nconst String blue = '\\x1B[34m';\nconst String orange = '\\x1B[33m';\nconst String red = '\\x1B[31m';\n\n/// 根据日志级别返回不同的颜色\nString _getLogLevelColor(LogLevel level) {\n  switch (level) {\n    case LogLevel.debug:\n      return blue;\n    case LogLevel.warning:\n      return orange;\n    case LogLevel.error:\n      return red;\n    case LogLevel.info:\n      return reset;\n  }\n}\n\n/// 格式化堆栈帧信息\nString _formatStackFrame(StackFrame frame) {\n  return '#${frame.source} ${frame.package}:${frame.packagePath}:${frame.line}:${frame.column}';\n}\n\n/// 日志消息格式化\nString _formatLogMessage(\n  Object? object,\n  LogLevel level,\n  StackFrame frame,\n) {\n  final color = _getLogLevelColor(level);\n  final formattedTime = DateTime.now().toString();\n  final formattedType = object?.runtimeType ?? 'Unknown';\n\n  return '''\n$color[${level.name.toUpperCase()}] $formattedTime $formattedType\n${frame.package}:${frame.packagePath}:${frame.line}:${frame.column}:\n$object\n''';\n}\n\n/// 日志打印基础方法\nvoid _logMessage(\n  Object? object,\n  LogLevel level, {\n  bool fullStack = false,\n}) {\n  if (!kDebugMode) return;\n\n  final frames = StackFrame.fromStackTrace(StackTrace.current);\n  final formattedMessage = _formatLogMessage(object, level, frames[2]);\n\n  // 打印日志\n  log(formattedMessage, level: 0);\n\n  if (fullStack) {\n    final stackFrames = frames.skip(2).map(_formatStackFrame).toList();\n    final stackTraceStr = stackFrames.join('\\n');\n    log(stackTraceStr, level: 0);\n  }\n}\n\n/// 打印调试级别的日志\nvoid logDebug(Object? object, {bool fullStack = false}) {\n  _logMessage(object, LogLevel.debug, fullStack: fullStack);\n}\n\n/// 打印警告级别的日志\nvoid logWarning(Object? object, {bool fullStack = false}) {\n  _logMessage(object, LogLevel.warning, fullStack: fullStack);\n}\n\n/// 打印错误级别的日志\nvoid logError(Object? object, {bool fullStack = false}) {\n  _logMessage(object, LogLevel.error, fullStack: fullStack);\n}\n\n/// 打印信息级别的日志\nvoid logInfo(Object? object, {bool fullStack = false}) {\n  _logMessage(object, LogLevel.info, fullStack: fullStack);\n}\n\n```\n","excerpt":"","tasklists":0,"title":"","headers":[]}}
